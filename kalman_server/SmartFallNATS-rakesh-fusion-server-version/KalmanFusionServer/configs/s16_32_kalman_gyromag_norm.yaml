# s16_32_kalman_gyromag_norm - Stride s16_32
# Architecture: KalmanConv1dConv1d
# Input: Kalman Gyromag - 7ch
# Normalization: Acc normalization

nats_url: "nats://localhost:4222"
subject_pattern: "m.kalman_transformer.*"
default_fs_hz: 31.25
window_size: 128

preprocessing:
  feature_mode: kalman_gyro_mag
  normalization_mode: acc_only
  scaler_path: weights/scalers/s16_32_kalman_gyromag_norm_scaler.pkl
  convert_gyro_to_rad: true

kalman:
  filter_type: linear
  Q_orientation: 0.005
  Q_rate: 0.01
  R_acc: 0.05
  R_gyro: 0.1

state:
  timeout_ms: 10000
  cache_ttl_ms: 60000
  enable_incremental: false

model:
  architecture: KalmanConv1dConv1d
  weights_path: weights/s16_32_kalman_gyromag_norm.pth
  device: cpu
  model_args:
    imu_frames: 128
    imu_channels: 7
    embed_dim: 48
    acc_ratio: 0.65
    num_heads: 4
    num_layers: 2
